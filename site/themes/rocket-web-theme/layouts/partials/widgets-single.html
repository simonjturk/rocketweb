{{/* displays a single widget*/}}

{{ $scope := .scope }}
{{ $type := .type }}
{{ $widget := .widget }}
{{ $card := .card }}

{{ $widgets := (partial "functions/get_widgets" (dict "scope" $scope "type" $type)) }}

{{ range $widgets }}
    {{ if eq .Params.widget $widget  }}
    {{ $partial := .Params.widget }}

    {{ if $card }}
        {{ $partial = print $partial "_card"}}
    {{ end }}

    {{$partial = print "widgets/" $partial ".html"}}

    {{partial $partial .}}
    {{ end }}
{{ end }}